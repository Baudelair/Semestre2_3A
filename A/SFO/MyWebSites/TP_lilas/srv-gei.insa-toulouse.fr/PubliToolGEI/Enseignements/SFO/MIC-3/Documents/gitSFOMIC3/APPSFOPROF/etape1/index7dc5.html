<html>
<!-- Mirrored from srv-gei.insa-toulouse.fr/PubliToolGEI/Enseignements/SFO/MIC-3/Documents/gitSFOMIC3/APPSFOPROF/etape1/index.html?part=ID_PubliTool_N10118 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 May 2018 14:00:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>&Eacute;tape 1&nbsp;:  Le cœur et les &micro;-s&eacute;quences</title><!--Généré dynamiquement par PubliTool 2009--><link href="../../../../../../../BASE/CSS/Article.css" rel="stylesheet"><script src="../../../../../../../BASE/JS/Article.js" type="text/javascript">
   </script><script src="../../../../../../../BASE/JS/Mozile08/mozile.js" type="text/javascript"></script><script type="text/javascript">
      mozile.root = "../../../../../../../BASE/JS/Mozile08";
      mozile.useSchema("../../../../../../../BASE/JS/xhtmlPubliTool.rng");
      mozile.help = "http://srv-gei.insa-toulouse.fr/PubliToolGEI/BASE/JS/Mozile08/doc/html/index.html";
     </script><script src="../../../../../../../BASE/JS/formulaire.js" type="text/javascript"></script><script src="../../../../../../../BASE/JS/mozilePubliTool.js" type="text/javascript"></script></head><body><div id="zoneBoutons"><table style="padding: 0px;border:0px;"><tr style="padding: 0px;border:0px;"><td style="padding: 0px;border:0px;"><a href="../index.html"><img xmlns:url="http://whatever/java/java.net.URLEncoder" src="../pucePRpetiteee0c.png?echelle=0.60"></a></td></tr></table></div><div class="zoneTitreCentr&eacute;e" id="titre">&Eacute;tape 1&nbsp;:  Le cœur et les &micro;-s&eacute;quences</div><div id="tocFixe"><ul><li class="niv0"><a href="index.html" onClick="return chargerURLsansHistorique(this)">&Eacute;tape 1&nbsp;:  Le cœur et les &micro;-s&eacute;quences</a></li><li class="niv1"><a href="index7081.html?part=ID_PubliTool_N10038" onClick="return chargerURLsansHistorique(this)">1 Comment marche le s&eacute;quenceur d'un cœur?</a></li><li class="niv1"><a href="index27d2.html?part=ID_PubliTool_N1006C" onClick="return chargerURLsansHistorique(this)">2 Ma&icirc;trise du simulateur</a></li><li class="niv2"><a href="index7baf.html?part=ID_PubliTool_N100C4" onClick="return chargerURLsansHistorique(this)">2.1 Ma&icirc;trise du &micro;-s&eacute;quenceur</a></li><li class="niv2sel"><a href="index7dc5.html?part=ID_PubliTool_N10118" onClick="return chargerURLsansHistorique(this)">2.2 Ma&icirc;trise du chemin des donn&eacute;es</a></li><li class="niv2"><a href="indexf185.html?part=ID_PubliTool_N102E3" onClick="return chargerURLsansHistorique(this)">2.3 La boucle Von Neumann</a></li><li class="niv1"><a href="index5cd8.html?part=ID_PubliTool_N10445" onClick="return chargerURLsansHistorique(this)">3 D&eacute;veloppement du jeu d'instructions et modes d'adressages</a></li><li class="niv1"><a href="index9d66.html?part=ID_PubliTool_N106A0" onClick="return chargerURLsansHistorique(this)">4 Ma&icirc;trise de la carte Nexys3</a></li><li class="niv1"><a href="index674d.html?part=ID_PubliTool_N10740" onClick="return chargerURLsansHistorique(this)">5 Application&nbsp;: pilotage d'un filtre audio</a></li></ul></div><div class="zoneMain"><p class="H2c" xmlns:url="http://whatever/java/java.net.URLEncoder">
   - 2.2 -</p><p class="H2c" xmlns:url="http://whatever/java/java.net.URLEncoder">Ma&icirc;trise du chemin des donn&eacute;es</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">
Maintenant que le s&eacute;quenceur (cf Polycopi&eacute; Chapitre 7.3) est ma&icirc;tris&eacute; par certaines
&micro;-commandes de la ROM de &micro;-code, vous pouvez utiliser
le reste des &micro;-commandes pour actionner le chemin des donn&eacute;es
et ex&eacute;cuter l'initialisation du cœur en premier lieu.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">Notre cœur est calqu&eacute; sur le cortex-M3 et il stocke le pointeur
de pile, not&eacute; SP pour <i>stack pointer</i>, dans le registre R13 et le
compteur ordinal, not&eacute; PC pour <i>program counter</i>, dans le registre R15.
Tout comme le cortex-M3, notre cœur doit chercher la valeur initiale
de SP dans la ROM &agrave; l'adresse 0 &agrave; la suite d'un reset. Par contre,
contrairement au cortex-M3, notre cœur initialisera aussi PC &agrave; la
valeur stock&eacute;e dans la ROM &agrave; la suite de SP (&agrave; l'adresse 2, &eacute;tant donn&eacute; que notre machine utilise un adressage &agrave; l'octet, cf Polycopi&eacute; page 100).</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder"><div class="" style="background-color:#FFCCFF;margin-top:1cm;margin-bottom:1cm;margin-left:0.25cm;margin-right:0.25cm"><strong>Travail&nbsp;: Ma&icirc;triser le chemin des donn&eacute;es</strong><i><p style="text-align:justify;"> Compl&eacute;tez la ROM avec &agrave; l'adresse 0 la valeur initiale de SP suivie
de celle de PC que vous choisirez librement en respectant le plan
m&eacute;moire&nbsp;: pas de code en RAM etc. La m&eacute;moire Rom (pour les programmes et les donn&eacute;es) de la machine simul&eacute;e occupe l'espace adressable compris entre 0x0000 et 0x01FF tandis que la m&eacute;moire RAM occupe l'espace adressable compris entre 0x0200 et 0x03FF. Compl&eacute;tez la ROM de &micro;-code
pour que la s&eacute;quence 0-1-2-3-4 r&eacute;alise la phase d'initialisation du
tableau  2.1. N'oubliez pas d'enregistrer le contenu de la m&eacute;moire microcode dans un fichier avant de quitter le simulateur.
</p></i></div></p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">
<table border="1" width="100%"><colgroup><col width="1.8cm"><col width="1.cm"><col width="6.5cm"><col width="7cm"></colgroup><tr><td>Phase</td><td>&micro;@</td><td>&micro;-commande du s&eacute;quenceur</td><td>&micro;-commande du chemin de donn&eacute;es</td></tr><tr><td rowspan="5">Initialisation</td><td>0</td><td>&micro;@ &larr; &micro;@+1</td><td>R0
&larr; 0, BR=1 (<i>Bus Request</i>)</td></tr><tr><td>1</td><td>&micro;@ &larr; &micro;@+1</td><td>SP &larr; M[R0], DR=1 (<i>Data Ready</i>)</td></tr><tr><td>2</td><td>&micro;@ &larr; &micro;@+1</td><td>R1 &larr; 2</td></tr><tr><td>3</td><td>&micro;@ &larr; &micro;@+1</td><td>PC &larr; M[R1], DR=1 (<i>Data Ready</i>)</td></tr><tr><td>4</td><td>&micro;@ &larr; F0 (aller &agrave; fetch)</td><td>ClrBBY (<i>Lib&eacute;ration du bus</i>)</td></tr></table><p style="top:10pt;bottom:5mm;text-align:justify;"></p><div class="centr&eacute;e">Tab 2.1  : D&eacute;but de la ROM de &micro;-code  avec les &micro;-s&eacute;quences d'initialisations</div>
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">Le s&eacute;quencement des &micro;-instructions n'est pas exactement celui
d&eacute;crit dans le graphe pr&eacute;c&eacute;dent. Sans rentrer dans le d&eacute;tail du protocole de bus
utilis&eacute; dans la machine (cf Polycopi&eacute; Chapitre 5), examinons son fonctionnement.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">Pour que le cœur &eacute;change des informations avec la m&eacute;moire de la carte
Rom, il lui faut tout d'abord acqu&eacute;rir le bus (pour en devenir
ma&icirc;tre). Ceci est r&eacute;alis&eacute; simplement en positionnement BR (BusRequest)
&agrave; 1. Le cœur saura qu'il a obtenu le Bus en observant que l'indicateur BG
(BusGrant) prend la valeur 1. Si c'est le cas, &agrave;
partir du prochain cycle de &micro;-instruction, le cœur devient ma&icirc;tre du
bus (indiqu&eacute; par le signal Mcoeur qui prend alors la valeur 1). Par la
m&ecirc;me occasion, le bus devient occup&eacute; (indiqu&eacute; par l'indicateur
<span style="text-decoration:overline;">BusBBY</span> qui prend la valeur 0).</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder"><div class="centr&eacute;e"><embed src="indexf803.svg?part=img1&amp;id=img1" type="image/svg+xml"></embed></div>
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">Lorsque le cœur est ma&icirc;tre du bus, il peut effectuer des &eacute;changes
avec l'une ou l'autre des cartes connect&eacute;es sur le bus. Il suffit
d'envoyer l'adresse d&eacute;signant le destinataire (par exemple l'adresse
d'un mot dans la rom), et positionner DR (<i>Data Ready</i>) &agrave; 1. Si le destinataire est pr&ecirc;t, il le signalera
par l'indicateur DA (<i>Data Accepted</i>) qui prendra la valeur 1. L'&eacute;change
se fait &agrave; la fin du cycle d'ex&eacute;cution de la &micro;-instruction.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder"><div class="centr&eacute;e"><embed src="index8cc8.svg?part=img2&amp;id=img2" type="image/svg+xml"></embed></div>
</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder">Lorsque, le cœur a termin&eacute; le ou les &eacute;changes &agrave; travers le bus, il
doit lib&eacute;rer le bus en actionnant la &micro;-commande ClrBBY (<i>Clear Bus Busy</i>). Dans notre
s&eacute;quence d'initialisation, l'acquisition du bus se fait &agrave; la
&micro;-adresse 0, tandis que la lib&eacute;ration se fait &agrave; la &micro;-adresse
4. Entre temps, le cœur aura effectu&eacute; deux &eacute;changes, le premier &agrave; la
&micro;-adresse 1, le deuxi&egrave;me &agrave; la &micro;-adresse 3.</p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder"><div class="" style="background-color:#99FFFF;margin-top:1cm;margin-bottom:1cm;margin-left:0.25cm;margin-right:0.25cm"><strong>Testez vos comp&eacute;tences sur <a href="doc/Exercice3.html">Bus de communication (1)</a></strong></div></p><p style="top:10pt;bottom:5mm;text-align:justify;" xmlns:url="http://whatever/java/java.net.URLEncoder"><div class="" style="background-color:#99FFFF;margin-top:1cm;margin-bottom:1cm;margin-left:0.25cm;margin-right:0.25cm"><strong>Testez vos comp&eacute;tences sur <a href="doc/Exercice4.html">Bus de communication (2)</a></strong></div></p></div></body>
<!-- Mirrored from srv-gei.insa-toulouse.fr/PubliToolGEI/Enseignements/SFO/MIC-3/Documents/gitSFOMIC3/APPSFOPROF/etape1/index.html?part=ID_PubliTool_N10118 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 31 May 2018 14:00:52 GMT -->
</html>